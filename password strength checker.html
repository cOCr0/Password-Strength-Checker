<!DOCTYPE html>
<html>
<head>
  <title>Password Strength Checker</title>
  <style>
    body {
      font-family: Arial;
      padding: 30px;
    }

    input {
      padding: 8px;
      width: 260px;
      font-size: 16px;
    }

    button {
      padding: 8px 15px;
      margin-top: 10px;
      font-size: 16px;
    }

    .rules {
      margin-top: 15px;
      font-size: 14px;
    }

    .error {
      color: red;
      font-weight: bold;
    }

    .success {
      color: green;
      font-weight: bold;
    }

    .suggestion {
      color: blue;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<h2>Password Strength Checker</h2>

<form onsubmit="return validatePassword()">
  <input type="password" id="password" placeholder="Enter password">
  <br>
  <button type="submit">Submit</button>

  <p id="result"></p>
  <p id="suggestion"></p>
</form>

<!-- Requirements -->
<div class="rules">
  <p><b>Password must contain:</b></p>
  <ul>
    <li>Minimum 10 characters</li>
    <li>At least one uppercase letter</li>
    <li>At least one lowercase letter</li>
    <li>At least one number</li>
    <li>At least one special character</li>
    <li>No sequence longer than 3 characters (e.g., 1234, abcd)</li>
  </ul>
</div>

<script>

// Detect sequences of 4 characters
function hasSequence(password) {
  for (let i = 0; i < password.length - 3; i++) {
    let seq = password.substring(i, i + 4);

    if ("0123456789".includes(seq) ||
        "abcdefghijklmnopqrstuvwxyz".includes(seq.toLowerCase())) {
      return true;
    }
  }
  return false;
}

// Generate random strong password
function generateStrongPassword() {
  const upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const lower = "abcdefghijklmnopqrstuvwxyz";
  const numbers = "0123456789";
  const special = "!@#$%^&*()_+{}[]";
  const allChars = upper + lower + numbers + special;

  let password = "";

  // Ensure required characters
  password += upper[Math.floor(Math.random() * upper.length)];
  password += lower[Math.floor(Math.random() * lower.length)];
  password += numbers[Math.floor(Math.random() * numbers.length)];
  password += special[Math.floor(Math.random() * special.length)];

  // Fill remaining characters to length 12
  for (let i = 0; i < 8; i++) {
    password += allChars[Math.floor(Math.random() * allChars.length)];
  }

  return password;
}

function validatePassword() {

  let password = document.getElementById("password").value;
  let result = document.getElementById("result");
  let suggestion = document.getElementById("suggestion");

  suggestion.innerText = "";

  if (password.length < 10) {
    showError("Password must be at least 10 characters long");
    return false;
  }

  if (!/[A-Z]/.test(password)) {
    showError("Password must include an uppercase letter");
    return false;
  }

  if (!/[a-z]/.test(password)) {
    showError("Password must include a lowercase letter");
    return false;
  }

  if (!/[0-9]/.test(password)) {
    showError("Password must include a number");
    return false;
  }

  if (!/[^A-Za-z0-9]/.test(password)) {
    showError("Password must include a special character");
    return false;
  }

  if (hasSequence(password)) {
    showError("Password contains a sequence longer than 3 characters");
    return false;
  }

  result.innerText = "Password is strong.";
  result.className = "success";
  return false; // prevent reload
}

function showError(message) {
  let result = document.getElementById("result");
  let suggestion = document.getElementById("suggestion");

  result.innerText = message;
  result.className = "error";

  let strongPassword = generateStrongPassword();
  suggestion.innerText = "Example strong password: " + strongPassword;
  suggestion.className = "suggestion";
}

</script>

</body>
</html>
